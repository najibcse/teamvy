<!DOCTYPE html>
<html lang="en">
<head>
    <title>@ViewBag.Title</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="@Url.Content("~/Content/themes/site/css/style.default.css")" rel="stylesheet" type="text/css" />
    <link id="skinstyle" rel="stylesheet" href="~/Content/themes/site/css/style.dark.css"
        type="text/css" />
    <link href="@Url.Content("~/Content/themes/site/prettify/prettify.css")" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="@Url.Content("~/Content/themes/site/js/jquery.min.js")"></script>
    <script src="@Url.Content("~/Content/themes/site/prettify/prettify.js")" type="text/javascript"></script>
    <script type="text/javascript" src="@Url.Content("~/Content/themes/site/js/jquery.dataTables.nightly.js")"></script>
    <script src="@Url.Content("~/Content/themes/site/js/jquery-migrate-1.1.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/themes/site/js/jquery-ui-1.9.2.min.js")" type="text/javascript"></script>
   <script src="@Url.Content("~/Content/themes/site/js/jquery.flot.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/themes/site/js/jquery.flot.resize.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/themes/site/js/bootstrap.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/themes/site/js/jquery.cookie.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/themes/site/js/custom.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/themes/site/js/tinymce/jquery.tinymce.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/themes/site/js/chosen.jquery.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/themes/site/js/jquery.jgrowl.js")" type="text/javascript"></script>
    
    <script type="text/javascript">
        jQuery.noConflict();
        jQuery.noConflict();
        jQuery(document).ready(function () {
            jQuery('#dyntable').dataTable({
                "sPaginationType": "full_numbers",
                "aaSortingFixed": [[0, 'asc']],
                "fnDrawCallback": function (oSettings) {

                }
            });
        });
    </script>
    <script type="text/javascript">

        jQuery.noConflict();
        jQuery().ready(function () {
            jQuery('textarea.tinymce').tinymce({
                // Location of TinyMCE script
                script_url: '../../Content/themes/site/js/tinymce/tiny_mce.js',

                // General options
                theme: "advanced",
                skin: "themepixels",
                width: "100%",
                plugins: "autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist",
                inlinepopups_skin: "themepixels",
                // Theme options
                theme_advanced_buttons1: "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,outdent,indent,blockquote,formatselect,fontselect,fontsizeselect",
                theme_advanced_buttons2: "pastetext,pasteword,|,bullist,numlist,|,undo,redo,|,link,unlink,image,help,code,|,preview,|,forecolor,backcolor,removeformat,|,charmap,media,|,fullscreen",
                theme_advanced_buttons3: "",
                theme_advanced_toolbar_location: "top",
                theme_advanced_toolbar_align: "left",
                theme_advanced_statusbar_location: "bottom",
                theme_advanced_resizing: true,

                // Example content CSS (should be your site CSS)
                content_css: document.location.host + "/Content/themes/site/css/plugins/tinymce.css",

                // Drop lists for link/image/media/template dialogs
                template_external_list_url: "lists/template_list.js",
                external_link_list_url: "lists/link_list.js",
                external_image_list_url: "lists/image_list.js",
                media_external_list_url: "lists/media_list.js",

                // Replace values for the template plugin
                template_replace_values: {
                    username: "Some User",
                    staffid: "991234"
                }
            });


            jQuery('.editornav a').click(function () {
                jQuery('.editornav li.current').removeClass('current');
                jQuery(this).parent().addClass('current');
                if (jQuery(this).hasClass('visual'))
                    jQuery('#elm1').tinymce().show();
                else
                    jQuery('#elm1').tinymce().hide();
                return false;
            });
        });

    </script>
</head>
<body>
     @RenderSection("featured", required: false)
    <div class="mainwrapper" >

        <!-- START OF LEFT PANEL -->
        <div class="leftpanel">

            <div class="logopanel">
                <h1><a href="dashboard.html">PM Tool <span>v1.0</span></a></h1>
            </div>
            <!--logopanel-->

            <div class="datewidget">Today is @DateTime.Now.ToString("f")</div>

            <div class="searchwidget">

                <div class="input-append">
                    <form method="post" action="#">
                        <div class="input-append">
                            <input class="span2 search-query" type="text" placeholder="Search here...">
                            <button class="btn" type="submit">
                                <span class="icon-search"></span>
                            </button>
                        </div>
                    </form>
                </div>

            </div>
            <!--searchwidget-->

            

            <div class="leftmenu">
                <ul class="nav nav-tabs nav-stacked">
                    <li class="nav-header">Main Navigation</li>
                    <li class="active">
                         <li>@Html.ActionLink("Dashboard", "Index", "Home")</li>
                           
                    </li>
                    <li class="dropdown"><a href=""><span class="icon-briefcase"></span>Assigned Projects</a>
                        <ul>
                            @if (ViewBag.AssignedProjects != null)
                            {
                                foreach (PMTool.Models.Project item in (List<PMTool.Models.Project>)ViewBag.AssignedProjects)
                                {
                                    <li>@Html.ActionLink(@item.Name, "ProjectTasks", "Tasks", new { @projectID = item.ProjectID }, null)
                                    </li>
                                }
                            }
                        </ul>
                    </li>
                    <li class="dropdown"><a href=""><span class="icon-th-list"></span>Own Projects</a>
                        <ul>
                            <li>@Html.ActionLink("Create New Project", "Create", "Projects")</li>
                            <li>@Html.ActionLink("Projects Created by you", "Index", "Projects")</li>
                        </ul>
                    </li>
                    <li>@Html.ActionLink("Labels", "Index", "Labels")</li>
                    <li>@Html.ActionLink("Priorities", "Index", "Priorities")</li>
                    <li>@Html.ActionLink("Invite People", "InvitePeople", "Account")</li>
                   
                </ul>
            </div>
            <!--leftmenu-->

        </div>
        <!--mainleft-->
        <!-- END OF LEFT PANEL -->

        <!-- START OF RIGHT PANEL -->

        <div class="rightpanel">
            <div class="headerpanel">
                <a href="" class="showmenu"></a>

                <div class="headerright">
                    <div class="dropdown notification">
                        <a class="dropdown-toggle" data-toggle="dropdown" data-target="#" href="#">
                            <span class="iconsweets-globe iconsweets-white"></span>
                            @if (((List<PMTool.Models.Notification>)ViewBag.Notifications).Count > 0)
                            {
                               <span class="badge badge-important">@(((List<PMTool.Models.Notification>)ViewBag.Notifications).Count)</span>
                            }
                        </a>
                        <ul class="dropdown-menu">
                            <li class="nav-header">Notifications</li>
                            @if (((List<PMTool.Models.Notification>)ViewBag.Notifications).Count > 0)
                            {
                                foreach (PMTool.Models.Notification notification in (List<PMTool.Models.Notification>)ViewBag.Notifications)
                                {
                                    if (notification.TaskID == null)
                                    {
                                    <li><a href="@Url.Action("Details", "Projects", new { id = notification.ProjectID, notificationID = notification.NotificationID })"><span class='icon-envelope'></span><strong>@notification.Title</strong></a></li>
                                    }
                                    if (notification.TaskID != null)
                                    {
                                    
                                    <li><a href="@Url.Action("Edit", "Tasks", new { id = notification.TaskID, notificationID = notification.NotificationID })"><span class='icon-envelope'></span><strong>@notification.Title</strong></a></li>
                                    }
                                }
                            }
                             @if (((List<PMTool.Models.Notification>)ViewBag.Notifications).Count == 0)
                             {
                                 <li class="viewmore"><a href="">No unread notifications</a></li>
                             }
                        </ul>
                    </div>
                    <!--dropdown-->

                    <div class="dropdown userinfo">
                        <a class="dropdown-toggle" data-toggle="dropdown" data-target="#" href="/page.html">Hi, @ViewBag.UserName! <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="@Url.Action("EditProfile", "Account")"><span class="icon-edit"></span>Edit Profile</a></li>
                            <li><a href=""><span class="icon-wrench"></span>Account Settings</a></li>
                            <li><a href=""><span class="icon-eye-open"></span>Privacy Settings</a></li>
                            <li class="divider"></li>
                            <li>
                                <a href="@Url.Action("LogOff", "Account")">
                                    <span class="icon-off"></span>
                                    Sign Out
                                </a>
                            </li>
                        </ul>
                    </div>
                    <!--dropdown-->

                </div>
                <!--headerright-->

            </div>
            <!--headerpanel-->
            <div class="breadcrumbwidget">
                <ul class="breadcrumb">
                    <li><a href="dashboard.html">Home</a> <span class="divider">/</span></li>
                    <li class="active">Dashboard</li>
                </ul>
            </div>
            <!--breadcrumbwidget-->
            <!--pagetitle-->

            <div class="maincontent" ">
                 @RenderBody()
                <!--contentinner-->
            </div>
            <!--maincontent-->

        </div>
        <!--mainright-->
        <!-- END OF RIGHT PANEL -->

        <div class="clearfix"></div>

        <div class="footer">
            <div class="footerleft">Project Management Tool v1.0</div>
            <div class="footerright">Design & Developed by:</div>
        </div>
        <!--footer-->


    </div>
    <!--mainwrapper-->
   
</body>
</html>
<div id="jGrowl" class="top-right jGrowl">
<div class="jGrowl-notification"></div>
</div>
<div class="loaders">
    <img alt="" src="~/Content/themes/site/img/loaders/loader2.gif">
    </div>
<script type="text/javascript">
    jQuery(document).ready(function () {

        // basic chart
        var flash = [[0, 2], [1, 6], [2, 3], [3, 8], [4, 5], [5, 13], [6, 8]];
        var html5 = [[0, 5], [1, 4], [2, 4], [3, 1], [4, 9], [5, 10], [6, 13]];

        function showTooltip(x, y, contents) {
            jQuery('<div id="tooltip" class="tooltipflot">' + contents + '</div>').css({
                position: 'absolute',
                display: 'none',
                top: y + 5,
                left: x + 5
            }).appendTo("body").fadeIn(200);
        }


        var plot = jQuery.plot(jQuery("#chartplace2"),
			   [{ data: flash, label: "Flash(x)", color: "#fb6409" }, { data: html5, label: "HTML5(x)", color: "#096afb" }], {
			       series: {
			           lines: { show: true, fill: true, fillColor: { colors: [{ opacity: 0.05 }, { opacity: 0.15 }] } },
			           points: { show: true }
			       },
			       legend: { position: 'nw' },
			       grid: { hoverable: true, clickable: true, borderColor: '#ccc', borderWidth: 1, labelMargin: 10 },
			       yaxis: { min: 0, max: 15 }
			   });

        var previousPoint = null;
        jQuery("#chartplace2").bind("plothover", function (event, pos, item) {
            jQuery("#x").text(pos.x.toFixed(2));
            jQuery("#y").text(pos.y.toFixed(2));

            if (item) {
                if (previousPoint != item.dataIndex) {
                    previousPoint = item.dataIndex;

                    jQuery("#tooltip").remove();
                    var x = item.datapoint[0].toFixed(2),
					y = item.datapoint[1].toFixed(2);

                    showTooltip(item.pageX, item.pageY,
									item.series.label + " of " + x + " = " + y);
                }

            } else {
                jQuery("#tooltip").remove();
                previousPoint = null;
            }

        });

        jQuery("#chartplace2").bind("plotclick", function (event, pos, item) {
            if (item) {
                jQuery("#clickdata").text("You clicked point " + item.dataIndex + " in " + item.series.label + ".");
                plot.highlight(item.series, item.datapoint);
            }
        });


        // bar graph
        var d2 = [];
        for (var i = 0; i <= 10; i += 1)
            d2.push([i, parseInt(Math.random() * 30)]);

        var stack = 0, bars = true, lines = false, steps = false;
        jQuery.plot(jQuery("#bargraph2"), [d2], {
            series: {
                stack: stack,
                lines: { show: lines, fill: true, steps: steps },
                bars: { show: bars, barWidth: 0.6 }
            },
            grid: { hoverable: true, clickable: true, borderColor: '#bbb', borderWidth: 1, labelMargin: 10 },
            colors: ["#06c"]
        });


    });
</script>
